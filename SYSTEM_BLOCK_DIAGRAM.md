# HealthConnect PWA - System Block Diagram

## System Architecture Overview

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            HEALTHCONNECT PWA SYSTEM                            │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                                CLIENT LAYER                                     │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                │
│  │   Mobile Web    │  │   Desktop Web   │  │   PWA Client    │                │
│  │   (Responsive)  │  │    (Browser)    │  │  (Installed)    │                │
│  │                 │  │                 │  │                 │                │
│  │ • Touch UI      │  │ • Full Layout   │  │ • Offline Mode  │                │
│  │ • Gestures      │  │ • Desktop Nav   │  │ • Push Notif    │                │
│  │ • Bottom Nav    │  │ • Multi-column  │  │ • App Icon      │                │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                │
└─────────────────────────────────────────────────────────────────────────────────┘
                                    │
                              ┌─────▼─────┐
                              │   HTTPS   │
                              │ SSL/TLS   │
                              └─────┬─────┘
                                    │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                          PRESENTATION LAYER                                     │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                           FRONTEND COMPONENTS                           │   │
│  ├─────────────────────────────────────────────────────────────────────────┤   │
│  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐       │   │
│  │ │    PWA      │ │  Navigation │ │   Forms &   │ │ Dashboard & │       │   │
│  │ │ Manifest &  │ │   & Menu    │ │ Validation  │ │   Charts    │       │   │
│  │ │Service Work.│ │   System    │ │             │ │             │       │   │
│  │ └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘       │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                            STATIC ASSETS                                │   │
│  ├─────────────────────────────────────────────────────────────────────────┤   │
│  │ • CSS Stylesheets (style.css)                                          │   │
│  │ • JavaScript (app.js)                                                  │   │
│  │ • Images & Icons                                                       │   │
│  │ • Fonts & Libraries                                                    │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────┘
                                    │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            APPLICATION LAYER                                    │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                        ROLE-BASED INTERFACES                           │   │
│  ├─────────────────────────────────────────────────────────────────────────┤   │
│  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐                       │   │
│  │ │   ADMIN     │ │   HEALTH    │ │   PATIENT   │                       │   │
│  │ │ DASHBOARD   │ │   WORKER    │ │ INTERFACE   │                       │   │
│  │ │             │ │ INTERFACE   │ │             │                       │   │
│  │ │• Users Mgmt │ │• Appt. Mgmt │ │• Book Appt  │                       │   │
│  │ │• Reports    │ │• Patient    │ │• View       │                       │   │
│  │ │• Settings   │ │  Records    │ │  Records    │                       │   │
│  │ │• Analytics  │ │• Immunize   │ │• Profile    │                       │   │
│  │ └─────────────┘ └─────────────┘ └─────────────┘                       │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                      AUTHENTICATION & SESSION                          │   │
│  ├─────────────────────────────────────────────────────────────────────────┤   │
│  │ • Session Management (PHP Sessions)                                    │   │
│  │ • Password Hashing (bcrypt)                                            │   │
│  │ • OTP Email Verification                                               │   │
│  │ • Role-Based Access Control                                            │   │
│  │ • CSRF Protection                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────┘
                                    │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              API LAYER                                          │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                          RESTful API ENDPOINTS                         │   │
│  ├─────────────────────────────────────────────────────────────────────────┤   │
│  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐                       │   │
│  │ │  PATIENTS   │ │APPOINTMENTS │ │IMMUNIZATION │                       │   │
│  │ │     API     │ │     API     │ │     API     │                       │   │
│  │ │             │ │             │ │             │                       │   │
│  │ │• CRUD Ops   │ │• Schedule   │ │• Track      │                       │   │
│  │ │• Approval   │ │• Update     │ │• Remind     │                       │   │
│  │ │• Delete     │ │• Remind     │ │• Delete     │                       │   │
│  │ └─────────────┘ └─────────────┘ └─────────────┘                       │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                          INPUT VALIDATION                               │   │
│  ├─────────────────────────────────────────────────────────────────────────┤   │
│  │ • Server-side Validation                                               │   │
│  │ • Data Sanitization                                                    │   │
│  │ • SQL Injection Prevention                                             │   │
│  │ • XSS Protection                                                       │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────┘
                                    │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           BUSINESS LOGIC LAYER                                  │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                         CORE MODULES                                   │   │
│  ├─────────────────────────────────────────────────────────────────────────┤   │
│  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐       │   │
│  │ │   Patient   │ │Appointment  │ │Immunization │ │   Reports   │       │   │
│  │ │ Management  │ │ Scheduling  │ │  Tracking   │ │ Generation  │       │   │
│  │ │             │ │             │ │             │ │             │       │   │
│  │ │• Register   │ │• Book       │ │• Schedule   │ │• Analytics  │       │   │
│  │ │• Update     │ │• Reschedule │ │• Notify     │ │• Export PDF │       │   │
│  │ │• Approve    │ │• Cancel     │ │• Track      │ │• Statistics │       │   │
│  │ └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘       │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────┘
                                    │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           DATA ACCESS LAYER                                     │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                      DATABASE CONNECTION                                │   │
│  ├─────────────────────────────────────────────────────────────────────────┤   │
│  │ • PDO Database Connection                                               │   │
│  │ • Connection Pooling                                                   │   │
│  │ • Prepared Statements                                                  │   │
│  │ • Transaction Management                                               │   │
│  │ • Error Handling & Logging                                             │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────┘
                                    │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                             DATABASE LAYER                                      │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                        MySQL DATABASE                                  │   │
│  ├─────────────────────────────────────────────────────────────────────────┤   │
│  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐       │   │
│  │ │    USERS    │ │  PATIENTS   │ │APPOINTMENTS │ │IMMUNIZATION │       │   │
│  │ │    TABLE    │ │    TABLE    │ │    TABLE    │ │    TABLE    │       │   │
│  │ │             │ │             │ │             │ │             │       │   │
│  │ │• user_id    │ │• patient_id │ │• appt_id    │ │• immun_id   │       │   │
│  │ │• username   │ │• name       │ │• patient_id │ │• patient_id │       │   │
│  │ │• password   │ │• contact    │ │• date_time  │ │• vaccine    │       │   │
│  │ │• role       │ │• address    │ │• status     │ │• date_given │       │   │
│  │ │• email      │ │• medical_no │ │• notes      │ │• next_due   │       │   │
│  │ └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘       │   │
│  │                                                                         │   │
│  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐       │   │
│  │ │  MEDICAL    │ │   HEALTH    │ │   REPORTS   │ │    LOGS     │       │   │
│  │ │  RECORDS    │ │  PROGRAMS   │ │    TABLE    │ │   TABLE     │       │   │
│  │ │    TABLE    │ │    TABLE    │ │             │ │             │       │   │
│  │ │             │ │             │ │• report_id  │ │• log_id     │       │   │
│  │ │• record_id  │ │• program_id │ │• type       │ │• user_id    │       │   │
│  │ │• patient_id │ │• name       │ │• data       │ │• action     │       │   │
│  │ │• diagnosis  │ │• description│ │• created    │ │• timestamp  │       │   │
│  │ │• treatment  │ │• schedule   │ │• status     │ │• ip_address │       │   │
│  │ └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘       │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                           EXTERNAL SERVICES                                     │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              │
│  │      SMS        │  │     EMAIL       │  │   PDF/QR CODE   │              │
│  │   GATEWAY       │  │    SERVICE      │  │   GENERATION    │              │
│  │                 │  │                 │  │                 │              │
│  │• Appointment    │  │• PHPMailer      │  │• DomPDF         │              │
│  │  Reminders      │  │• OTP Delivery   │  │• QR Code Gen    │              │
│  │• Immunization   │  │• Notifications  │  │• Report Export  │              │
│  │  Alerts         │  │• SMTP Gmail     │  │• Slip Printing  │              │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘              │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                            INFRASTRUCTURE                                       │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              │
│  │  WEB SERVER     │  │   PHP RUNTIME   │  │   DATABASE      │              │
│  │   (Apache)      │  │                 │  │    SERVER       │              │
│  │                 │  │• PHP 8.0+       │  │   (MySQL)       │              │
│  │• HTTP/HTTPS     │  │• Extensions     │  │                 │              │
│  │• Virtual Hosts  │  │• Composer       │  │• ACID           │              │
│  │• SSL Certs      │  │• Dependencies   │  │• Backups        │              │
│  │• Load Balancing │  │• Error Logging  │  │• Replication    │              │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘              │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Data Flow Diagram

```
┌──────────┐    ┌──────────────┐    ┌─────────────┐    ┌──────────────┐
│   USER   │───▶│ FRONTEND     │───▶│ VALIDATION  │───▶│ BUSINESS     │
│          │    │ (PWA/Web)    │    │ & SECURITY  │    │ LOGIC        │
└──────────┘    └──────────────┘    └─────────────┘    └──────────────┘
                        │                                        │
                        ▼                                        ▼
                ┌──────────────┐                        ┌──────────────┐
                │ SERVICE      │                        │ DATABASE     │
                │ WORKER       │                        │ OPERATIONS   │
                │ (Offline)    │                        │              │
                └──────────────┘                        └──────────────┘
                        │                                        │
                        ▼                                        ▼
                ┌──────────────┐    ┌─────────────┐    ┌──────────────┐
                │ CACHE        │◄───│ API LAYER   │◄───│ MySQL        │
                │ STORAGE      │    │ (REST)      │    │ DATABASE     │
                └──────────────┘    └─────────────┘    └──────────────┘
                                            │
                                            ▼
                                    ┌─────────────┐
                                    │ EXTERNAL    │
                                    │ SERVICES    │
                                    │ (SMS/Email) │
                                    └─────────────┘
```

## Component Interaction Flow

```
USER REQUEST FLOW:
┌─────┐   ┌─────┐   ┌─────┐   ┌─────┐   ┌─────┐   ┌─────┐   ┌─────┐
│  1  │──▶│  2  │──▶│  3  │──▶│  4  │──▶│  5  │──▶│  6  │──▶│  7  │
└─────┘   └─────┘   └─────┘   └─────┘   └─────┘   └─────┘   └─────┘
User      Frontend   Auth     API       Business  Database  Response
Input     Interface  Check    Endpoint  Logic     Query     Return

APPOINTMENT BOOKING FLOW:
Patient ──▶ Login ──▶ Select Service ──▶ Choose Date/Time ──▶ Confirm ──▶ SMS Alert ──▶ Calendar Update

IMMUNIZATION TRACKING FLOW:
Health Worker ──▶ Patient Search ──▶ View History ──▶ Add Record ──▶ Set Reminder ──▶ Generate Report

OFFLINE PWA FLOW:
User Action ──▶ Service Worker ──▶ Cache Check ──▶ Offline Storage ──▶ Background Sync ──▶ Server Update
```

## Security Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                         SECURITY LAYERS                        │
├─────────────────────────────────────────────────────────────────┤
│ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌───────────┐ │
│ │    SSL/     │ │ FRONTEND    │ │   SESSION   │ │ DATABASE  │ │
│ │    HTTPS    │ │ VALIDATION  │ │ MANAGEMENT  │ │ SECURITY  │ │
│ │             │ │             │ │             │ │           │ │
│ │• Cert Auth  │ │• Input Val  │ │• Auth Check │ │• Prepared │ │
│ │• Encrypt    │ │• XSS Prev   │ │• Role-Based │ │• Statements│ │
│ │• Data       │ │• CSRF Token │ │• Timeout    │ │• User     │ │
│ │  Integrity  │ │• Sanitize   │ │• Secure     │ │  Privileges│ │
│ └─────────────┘ └─────────────┘ └─────────────┘ └───────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

## Progressive Web App Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                       PWA COMPONENTS                           │
├─────────────────────────────────────────────────────────────────┤
│ ┌─────────────────────┐                ┌─────────────────────┐ │
│ │   WEB APP MANIFEST  │                │  SERVICE WORKER     │ │
│ │                     │                │                     │ │
│ │ • App Name & Icons  │                │ • Cache Management  │ │
│ │ • Display Mode      │                │ • Offline Strategy  │ │
│ │ • Theme Colors      │                │ • Background Sync   │ │
│ │ • Start URL         │                │ • Push Notifications│ │
│ │ • Orientation       │                │ • Update Management │ │
│ └─────────────────────┘                └─────────────────────┘ │
│                                                                 │
│ ┌─────────────────────┐                ┌─────────────────────┐ │
│ │   CACHE STORAGE     │                │   LOCAL STORAGE     │ │
│ │                     │                │                     │ │
│ │ • Static Assets     │                │ • User Preferences  │ │
│ │ • API Responses     │                │ • Form Data         │ │
│ │ • Offline Pages     │                │ • Session Info      │ │
│ │ • Images & CSS      │                │ • Offline Queue     │ │
│ └─────────────────────┘                └─────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

## Deployment Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    DEPLOYMENT STRUCTURE                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ ┌─────────────┐     ┌─────────────┐     ┌─────────────┐       │
│ │ DEVELOPMENT │────▶│   STAGING   │────▶│ PRODUCTION  │       │
│ │             │     │             │     │             │       │
│ │ • XAMPP     │     │ • Test Env  │     │ • Live Server│      │
│ │ • Local DB  │     │ • Validation│     │ • SSL Cert  │       │
│ │ • Debug ON  │     │ • User Test │     │ • Monitoring│       │
│ └─────────────┘     └─────────────┘     └─────────────┘       │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │              DEPLOYMENT PACKAGE                             │ │
│ │                                                             │ │
│ │ • Source Code (No vendor/)                                 │ │
│ │ • Database Schema                                          │ │
│ │ • Configuration Files                                      │ │
│ │ • Assets (CSS/JS/Images)                                   │ │
│ │ • Documentation                                            │ │
│ └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

---

*This block diagram provides a comprehensive overview of the HealthConnect PWA system architecture, showing the interaction between all system components from the user interface to the database layer, including security, PWA features, and deployment structure.*